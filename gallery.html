<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">

    <title>GTA V extracted images gallery</title>

    <!-- Bootstrap core CSS -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap theme -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" rel="stylesheet">

    <!--http://pagination.js.org/-->
    <link href="http://pagination.js.org/dist/2.1.0/pagination.css" rel="stylesheet">

    <link rel='stylesheet prefetch' href='https://cdn.jsdelivr.net/lightgallery/latest/css/lightgallery.css'>
    <link rel="stylesheet" href="css/gallery.css">

</head>

<body>
<div class="page-head">

    <div class="demo-gallery">
        <ul id="light2gallery">
            <li data-src="https://sachinchoolur.github.io/lightGallery/static/img/1-1600.jpg">
                <a href="">
                    <img class="img-responsive"
                         src="https://sachinchoolur.github.io/lightGallery/static/img/thumb-1.jpg">
                </a>
            </li>
            <li data-src="https://sachinchoolur.github.io/lightGallery/static/img/2-1600.jpg">
                <a href="">
                    <img class="img-responsive"
                         src="https://sachinchoolur.github.io/lightGallery/static/img/thumb-2.jpg">
                </a>
            </li>
            <li data-src="https://sachinchoolur.github.io/lightGallery/static/img/13-1600.jpg">
                <a href="">
                    <img class="img-responsive"
                         src="https://sachinchoolur.github.io/lightGallery/static/img/thumb-13.jpg">
                </a>
            </li>
            <li data-src="https://sachinchoolur.github.io/lightGallery/static/img/4-1600.jpg">
                <a href="">
                    <img class="img-responsive"
                         src="https://sachinchoolur.github.io/lightGallery/static/img/thumb-4.jpg">
                </a>
            </li>
        </ul>
    </div>

    <!--<div class="container theme-showcase" role="main">-->
    <div class="demo-gallery">
        <ul id="lightgallery">
            <li data-src="img\info-2017-11-24--15-08-06--215-0.jpg"><a href=""><img class="img-responsive"
                                                                                    style="height: 200px; width: 300px"
                                                                                    src="img\info-2017-11-24--15-08-06--215-0.jpg">
            </a></li>
            <li data-src="img\info-2017-11-24--15-08-11--502-0.jpg"><a href=""><img class="img-responsive"
                                                                                    style="height: 200px; width: 300px"
                                                                                    src="img\info-2017-11-24--15-08-11--502-0.jpg">
            </a></li>
            <li data-src="img\info-2017-11-24--15-08-13--333-0.jpg"><a href=""><img class="img-responsive"
                                                                                    style="height: 200px; width: 300px"
                                                                                    src="img\info-2017-11-24--15-08-13--333-0.jpg">
            </a></li>
            <li data-src="img\info-2017-11-24--15-08-15--145-0.jpg"><a href=""><img class="img-responsive"
                                                                                    style="height: 200px; width: 300px"
                                                                                    src="img\info-2017-11-24--15-08-15--145-0.jpg">
            </a></li>
            <li data-src="img\info-2017-11-24--15-08-17--066-0.jpg"><a href=""><img class="img-responsive"
                                                                                    style="height: 200px; width: 300px"
                                                                                    src="img\info-2017-11-24--15-08-17--066-0.jpg">
            </a></li>
            <li data-src="img\info-2017-11-24--15-08-18--940-0.jpg"><a href=""><img class="img-responsive"
                                                                                    style="height: 200px; width: 300px"
                                                                                    src="img\info-2017-11-24--15-08-18--940-0.jpg">
            </a></li>
            <li data-src="img\info-2017-11-24--15-09-55--192-0.jpg"><a href=""><img class="img-responsive"
                                                                                    style="height: 200px; width: 300px"
                                                                                    src="img\info-2017-11-24--15-09-55--192-0.jpg">
            </a></li>
            <li data-src="img\info-2017-11-24--15-09-57--365-0.jpg"><a href=""><img class="img-responsive"
                                                                                    style="height: 200px; width: 300px"
                                                                                    src="img\info-2017-11-24--15-09-57--365-0.jpg">
            </a></li>
        </ul>
    </div>

    <div class="data-container"></div>
    <div id="pagination">
    </div>
    <!--</div> &lt;!&ndash; /container &ndash;&gt;-->


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>

    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="https://maxcdn.bootstrapcdn.com/js/ie10-viewport-bug-workaround.js"></script>


    <script src='https://cdn.jsdelivr.net/picturefill/2.3.1/picturefill.min.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.1.13/jquery.mousewheel.min.js'></script>
    <script src='https://cdn.jsdelivr.net/g/lightgallery@1.3.5,lg-fullscreen@1.0.1,lg-hash@1.0.1,lg-pager@1.0.1,lg-share@1.0.1,lg-thumbnail@1.0.1,lg-video@1.0.1,lg-autoplay@1.0.1,lg-zoom@1.0.3'></script>

    <!--http://pagination.js.org/-->
    <script src="http://pagination.js.org/dist/2.1.0/pagination.min.js"></script>

    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
        (function () {
            $('#light2gallery').lightGallery({
                mode: 'lg-fade'
            });
            $('#lightgallery').lightGallery({
                mode: 'lg-fade'
            });

            var server_name = window.location.hostname;
            axios.defaults.baseURL = 'http://' + server_name + ':5000';

            $('#commands').find('button').each(function (i, element) {
                element.onclick = function (e) {
                    var text = this.id;
//                console.log(text);
                };
            });

            $('#pagination').pagination({
                dataSource: function (done) {
                    axios.get('/gallery/list').then(function (res) {
                        done(res.data);
                    });
                },
                locator: 'items',
                totalNumberLocator: function () {
                    axios.get('/gallery/count').then(function (res) {
//                    console.log("res.data");
//                    console.log(res.data);
                        return res.data
                    });
                },
                pageSize: 10,
                ajax: {
                    beforeSend: function () {
//                        var dataContainer = $('.data-container');
                        var dataContainer = $('#lightgallery');
                        dataContainer.html('Loading data from Server');
                    }
                },
                callback: function (data, pagination) {
//                    var dataContainer = $('.data-container');
                    var dataContainer = $('#lightgallery');

                    // template method of yourself
                    var html = template(data);
                    dataContainer.html(html);
                    reload_js('https://cdn.jsdelivr.net/g/lightgallery@1.3.5,lg-fullscreen@1.0.1,lg-hash@1.0.1,lg-pager@1.0.1,lg-share@1.0.1,lg-thumbnail@1.0.1,lg-video@1.0.1,lg-autoplay@1.0.1,lg-zoom@1.0.3');
                    $('#lightgallery').lightGallery({
                        mode: 'lg-fade'
                    });

                }

            })

        })();

        function reload_js(src) {
            $('script[src="' + src + '"]').remove();
            $('<script>').attr('src', src).appendTo('head');
        }


        function template(data) {
//        console.log(data);
            var html = '';
            $.each(data, function (index, item) {
                html += '<li data-src="' + item + '">' +
                    '<a href="">' +
                    '<img class="img-responsive" style="height: 200px; width: 300px" src="' + item + '">\n' +
                    '<\/a>' +
                    '<\/li>';
            });
//        console.log(html);
            return html;
        }

    </script>
</body>
</html>
